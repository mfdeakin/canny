(insert (format "%d" 3))

(defun gauss (x y variance)
  (/ (exp (- (/ (float (+ (* x x) (* y y))) (* 2 variance)))) (sqrt (* variance))))

(defun gaussian (xd yd variance)
  (let ((x (truncate (- (/ xd 2)))) (i 0))
    (insert (format "float g%d_%d_%d[%d][%d] =\n" variance xd yd xd yd))
    (while (< i xd)
      (let ((y (truncate (- (/ yd 2)))) (j 0))
	(if (= i 0) (insert " {{") (insert "  {"))
	(while (< j yd)
	  (insert (format "%.8f, " (gauss x y variance)))
	  (setq j (1+ j))
	  (setq y (1+ y)))
	(setq i (1+ i))
	(setq x (1+ x))
	(delete-char -2)
	(insert "},\n")))
    (delete-char -2)
    (insert "};")))

(defun gaussian-tbl (x-min x-max y-min y-max var-min var-max)
  (let ((var var-min))
    (while (<= var var-max)
      (let ((x x-min))
	(while (<= x x-max)
	  (let ((y y-min))
	    (while (<= y y-max)
	      (progn
		(gaussian x y var)
		(insert "\n\n")
		(setq y (+ y 2))))
	    (setq x (+ x 2))))
	(setq var (1+ var))))))

{{0.05682761, 0.06643821, 0.0729681, 0.07528436, 0.0729681, 0.06643821, 0.05682761},
{0.06643821, 0.07767414, 0.08530835, 0.08801633, 0.08530835, 0.07767414, 0.06643821},
{0.0729681, 0.08530835, 0.0936939, 0.09666703, 0.0936939, 0.08530835, 0.0729681},
{0.07528436, 0.08801633, 0.09666703, 0.09973557, 0.09666703, 0.0880163, 0.07528436},
{0.0729681, 0.08530835, 0.0936939, 0.09666703, 0.0936939, 0.08530835, 0.0729681},
{0.06643821, 0.07767414, 0.08530835, 0.08801633, 0.08530835, 0.07767414, 0.06643821},
{0.05682761, 0.06643821, 0.0729681, 0.07528436, 0.0729681, 0.06643821, 0.05682761}};

(gaussian 3 3 16)
float g16_3_3[3][3] = {
  {0.23485327, 0.24230831, 0.23485327},
  {0.24230831, 0.25000000, 0.24230831},
  {0.23485327, 0.24230831, 0.23485327}};
float g16_2_2[2][2] = {
  {0.23485327, 0.24230831},
  {0.24230831, 0.25000000}};
float g16_1_1[1][1] = {
  {0.25000000}};
float g16_7_7[7][7] = {
  {0.14244571, 0.16653590, 0.18290391, 0.18870990, 0.18290391, 0.16653590, 0.14244571},
  {0.16653590, 0.19470020, 0.21383633, 0.22062423, 0.21383633, 0.19470020, 0.16653590},
  {0.18290391, 0.21383633, 0.23485327, 0.24230831, 0.23485327, 0.21383633, 0.18290391},
  {0.18870990, 0.22062423, 0.24230831, 0.25000000, 0.24230831, 0.22062423, 0.18870990},
  {0.18290391, 0.21383633, 0.23485327, 0.24230831, 0.23485327, 0.21383633, 0.18290391},
  {0.16653590, 0.19470020, 0.21383633, 0.22062423, 0.21383633, 0.19470020, 0.16653590},
  {0.14244571, 0.16653590, 0.18290391, 0.18870990, 0.18290391, 0.16653590, 0.14244571}};